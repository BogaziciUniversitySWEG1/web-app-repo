<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b"
      xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link href="styles/css/cssdemo.css" media="all" rel="stylesheet" type="text/css" />
    <link href="styles/css/font-awesome.css" rel="stylesheet" />
    <title>BuComp</title>
    <link type="text/css" rel="stylesheet" href="styles/css/4235914959-widget_css_bundle.css" />
    <link type="text/css" rel="stylesheet" href="styles/css/authorization.css" />
    <link href="Styles/CSS/Site.css" rel="stylesheet" type="text/css" />
    <link href="Styles/CSS/layout.css" rel="stylesheet" type="text/css" />
    <script src="CommonScripts/jquery.min.js" type="text/javascript"></script>
    <script src="CommonScripts/GUI_HELPER.js" type="text/javascript"></script>
    <script src="CommonScripts/Common.js" type="text/javascript"></script>
</head>
<body class="home blog right-sidebar">
    <div id="bpagewrap">
        <header class="site-header" id="masthead" role="banner">
            <div class="site-header-wrapper">
                <div class="bwrapsite-branding">
                    <div class="headersec section" id="headersec">
                        <div class="widget Header" id="Header1">
                            <div id="header-inner">
                                <div class="titlewrapper">
                                    <h1 class="site-title"><a href="index.html">BuComp</a></h1>
                                </div>
                                <h2 class="site-description">BU Community Groups</h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="togglesnbtdiv">
                    <div class="togglenbtclass" id="menu-toggle" title="Menu" onclick="window.location='index.html';">
                        <span class="screen-reader-text">Menu</span>
                    </div>
                    <div class="togglenbtclass" id="search-toggle" title="Search">
                        <span class="screen-reader-text">User</span>
                    </div>
                </div>
            </div>
        </header>
        <!-- #masthead -->
        <div class="panel" id="search-toggle-nav">
            <div class="search-wrapper">
                <label>
                    <span class="screen-reader-text">User Name:</span>
                    <input class="search-field" name="q" placeholder="Email" type="email" value="" />
                    <span class="screen-reader-text">Password:</span>
                    <input class="search-field" name="q" placeholder="Password" type="password" value="" />
                </label>
                <input class="search-submit" type="button" value="Login" />
                <input class="search-submit" type="button" value="Register" />
            </div>
        </div>
        <div class="bwrapsite-content" id="bwrapcontent">
            <div class="content-area" id="primarybwrap">
                <div class="bwrapsite-main" id="mainbwrap" role="main">
                    <div class="mainblogsec section" id="mainblogsec">
                        <div class="widget Blog" id="Blog1">
                            <div class="blog-posts hfeed">
                                <div class="date-outer">
                                    <div class="date-posts">
                                        <div class="post-outer">
                                            <article class="post hentry">
                                                <a name="4682800689275728420"></a>
                                                <header class="entry-header">
                                                    <h2 class="post-title entry-title"><a href="community.html?cid=1">Create/Edit Community</a></h2>
                                                </header>
                                                <div class="post-header-line-1"></div>
                                                <div class="post-body entry-content">
                                                    <div class="form-group">
                                                        <label for="txtTitle">Title</label>
                                                        <input type="text" id="txtTitle" class="form-control" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="txtDescription">Description</label>
                                                        <textarea id="txtDescription" class="form-control" rows="10"></textarea>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="txtSemantic">Semantic Tags</label>
                                                        <input type="text" id="txtSemantic" class="form-control" />
                                                        <input type="button" value="Add Tag" class="search-submit" onclick="AddTag();" />
                                                    </div>
                                                    <div class="form-group">
                                                        <footer class="nbtentry-meta">
                                                            <span class="nbttags-links" id="tagSpan">
                                                            </span>
                                                        </footer>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="rbPublic">Visibility</label>
                                                        <br />
                                                        <input type="radio" id="rbPublic" name="accessType" value="1" class="form-control" style="display:inline !important; width:20px;" />Public
                                                        <input type="radio" id="rbMembers" name="accessType" value="2" class="form-control" style="display:inline !important; width:20px;" />Members Only
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="rbApprovalYes">Requires Approval?</label>
                                                        <br />
                                                        <input type="radio" id="rbApprovalYes" name="joinType" value="1" class="form-control" style="display:inline !important; width:20px;" />Yes
                                                        <input type="radio" id="rbApprovalNo" name="joinType" value="2" class="form-control" style="display:inline !important; width:20px;" />No
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="rbAuthorAll">Who Can Create Topic?</label>
                                                        <br />
                                                        <input type="radio" id="rbTopicAll" name="topicCreationType" value="1" class="form-control" style="display:inline !important; width:20px;" />All joined members
                                                        <input type="radio" id="rbTopicAllowed" name="topicCreationType" value="2" class="form-control" style="display:inline !important; width:20px;" />Only allowed members
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="rbAuthorAll">Who Can Post Comment?</label>
                                                        <br />
                                                        <input type="radio" id="rbAuthorAll" name="postType" value="1" class="form-control" style="display:inline !important; width:20px;" />All joined members
                                                        <input type="radio" id="rbAuthorAllowed" name="postType" value="2" class="form-control" style="display:inline !important; width:20px;" />Only allowed members
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="rbMeetingAll">Who Can Create Meeting?</label>
                                                        <br />
                                                        <input type="radio" id="rbMeetingAll" name="meetingCreationType" value="1" class="form-control" style="display:inline !important; width:20px;" />All joined members
                                                        <input type="radio" id="rbMeetingAllowed" name="meetingCreationType" value="2" class="form-control" style="display:inline !important; width:20px;" />Only allowed members
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="rbResourceAll">Who Can Add Resource?</label>
                                                        <br />
                                                        <input type="radio" id="rbResourceAll" name="resourceAdditionType" value="1" class="form-control" style="display:inline !important; width:20px;" />All joined members
                                                        <input type="radio" id="rbResourceAllowed" name="resourceAdditionType" value="2" class="form-control" style="display:inline !important; width:20px;" />Only allowed members
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="button" value="Create" class="search-submit" onclick="SaveCommunity();" />
                                                    </div>
                                                    <div style="clear: both;"></div>
                                                </div>
                                            </article>
                                            <div style="clear: both;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="clear: both;"></div>
                        </div>
                    </div>
                </div>
                <!-- #main -->
            </div>
            <!-- #primary -->
            <div class="bwrapwidget-area" id="secondarybwrap" role="complementary">
                <div class="sidebarbtop section" id="sidebarbtop">
                    <div class="widget PopularPosts" id="PopularPosts1">
                        <h2>Invited Members</h2>
                        <div class="widget-content popular-posts">
                            <div class="form-group">
                                <input type="text" id="txtInvitation" class="form-control" />
                                <input type="button" value="Invite" class="search-submit" onclick="AddInvitation();" />
                            </div>
                            <div class="form-group">
                                <select id="lstInvitation" name="lstInvited" size="5" class="form-control" multiple=multiple>
                                </select>
                            </div>
                            <div class="form-group">
                                <input type="button" value="Remove Selected" class="search-submit" onclick="RemoveInvitation();" />
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- #secondary -->
        </div>
        <!-- #content -->
        <footer class="site-footer" id="colophon" role="contentinfo">
            <div class="site-info">
                Copyright ©
                <script type="text/javascript">
                    var creditsyear = new Date();
                    document.write(creditsyear.getFullYear());
                </script>
                <a href="index.html">BuComp</a>
            </div><!-- .site-info -->
        </footer>
        <!-- #colophon -->
    </div>
    <!-- #page -->
	
	
	
    
    
    <script type="text/javascript">
        var tagList = new Array();
        var invitationList = new Array();
        jQuery(document).ready(function($) {
            function navMenu() {
                var menuToggle = $('#menu-toggle');
                var searchToggle = $('#search-toggle');
                var searchNav = $('#search-toggle-nav');

                function myToggleClass($myvar) {
                    if ($myvar.hasClass('active')) {
                        $myvar.removeClass('active');
                    } else {
                        $myvar.addClass('active');
                    }
                }

                // Display/hide menu
                menuToggle.on('click', function() {
                    myToggleClass($(this));

                    searchNav.hide();

                    searchToggle.removeClass('active');
                });

                // Display/hide search
                searchToggle.on('click', function() {
                    searchNav.slideToggle();
                    myToggleClass($(this));

                    menuToggle.removeClass('active');
                });
            }

            $(window).on('load', navMenu);
        });
        
        function AddTag(){
            var tag = $("#txtSemantic").val();
            tagList.push(tag);
            RefreshTagList();
            $("#txtSemantic").val("");
        }
        
        function RemoveTag(tag){
            var index = tagList.indexOf(tag);
            tagList.splice(index,1);
            RefreshTagList();
        }
        
        function RefreshTagList(){
            var tagContent = "";
            for(var i = 0; i< tagList.length; i++){
                tagContent = tagContent + "<img src='images/Delete.png' onclick='RemoveTag(\"" + tagList[i] + "\");' width='16' />";
                tagContent = tagContent + "<a rel='tag'>" + tagList[i] + "</a>";
                if(i<tagList.length-1){
                    tagContent = tagContent + ", ";
                }
            }
            $("#tagSpan").html(tagContent);
        }
        
        function AddInvitation(){
            var email = $("#txtInvitation").val();
            if(IsEmail(email)){
                invitationList.push(email);
                $("#txtInvitation").val("");

                $('#lstInvitation').append($('<option>', {
                    value: email,
                    text: email
                }));
            }else{
                alert("Please enter a valid email address.");
            }
            
        }
        
        function RemoveInvitation(){
            var index = $("#lstInvitation option:selected").index();
            if(index > -1){
                invitationList.splice(index,1);
                $("#lstInvitation option:selected").remove();
            } else{
                alert("Please select an email address.");
            }
            
        }
        
        function SaveCommunity(){
            var userId = GetQueryStringValue("uid");
            var title = $("#txtTitle").val();
            var description = $("#txtDescription").val();
            var createrUserId = userId;
            var creationDate = (new Date).getTime();
            var accessType = $('input[name=accessType]:checked').val();
            var joinType = $('input[name=joinType]:checked').val();
            var postType = $('input[name=postType]:checked').val();
            var meetingCreationType = $('input[name=meetingCreationType]:checked').val();
            var resourceAdditionType = $('input[name=resourceAdditionType]:checked').val();
            var topicCreationType = $('input[name=topicCreationType]:checked').val();
            DESIGN.SAVE(title, description, creationDate, createrUserId, accessType, joinType, postType, meetingCreationType, resourceAdditionType, topicCreationType, tagList, invitationList, SaveSuccess, SaveError);
    	}
        
        function SaveSuccess(msg){
            alert("Successfully saved. Redirecting to community page.");
            window.location = "community.html?cid=" + msg.communityId;
        }
        
        function SaveError(){
            alert("Error occured. Please contact to your system administrator.")
        }
    </script>
    
    <script src="PageScript/createcommunity/DESIGN.js" type="text/javascript"></script>
    <script src="PageScript/createcommunity/GLOBALS.js" type="text/javascript"></script>
    <script src="PageScript/createcommunity/SP_BANK.js" type="text/javascript"></script>
</body>
</html>
